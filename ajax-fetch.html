<async-provide moniker="ajax-fetch"></async-provide>
<script>document.registerElement("ajax-fetch",{prototype:{__proto__:HTMLElement.prototype,createdCallback:function(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",this.onLoad.bind(this)),this._lazy("url")},_lazy:function(t){if(this.hasOwnProperty(t)){var e=this[t];delete this[t],this[t]=e}else this.hasAttribute(t)&&(this[t]=this.getAttribute(t))},onLoad:function(t){this.dispatchEvent(new CustomEvent("response",{detail:t.target.response}))},set url(t){t&&this.sendXhr(this.xhr,this.type||this.getAttribute("type")||"json",this.method||this.getAttribute("method")||"GET",t)},sendXhr:function(t,e,s,i){t.abort(),t.responseType=e,t.open(s,i),t.send()}}});</script>